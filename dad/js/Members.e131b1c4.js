(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["Members"],{"475f":function(e,t,a){},"69dc":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",{staticClass:"mb-2"},[a("v-slide-y-transition",{attrs:{"hide-on-leave":""}},[e.dialog?a("v-card",[a("v-card-title",[a("h2",{staticClass:"subheading grey--text"},[e._v(" "+e._s(e.editMode?"DÃ¼zenle":"Yeni Ekle")+" ")]),a("v-spacer"),a("v-btn",{attrs:{color:"red",icon:""},on:{click:function(t){return e.closeForm()}}},[a("v-icon",[e._v("mdi-close")])],1)],1),a("v-card-text",[a("v-form",{ref:"form",staticClass:"px-3",model:{value:e.isFormValid,callback:function(t){e.isFormValid=t},expression:"isFormValid"}},[a("v-select",{attrs:{items:["moderator","uye"],label:"Yetki Durumu",outlined:"",filled:""},model:{value:e.form.role,callback:function(t){e.$set(e.form,"role",t)},expression:"form.role"}}),a("v-text-field",{attrs:{type:"text",outlined:"",placeholder:"Ä°sim","prepend-inner-icon":"edit",rules:e.inputRules},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}}),a("v-text-field",{attrs:{maxlength:"10",counter:"10",hint:"0 olmadan 10 hane olarak girin",type:"number",outlined:"",placeholder:"Telefon","prepend-inner-icon":"phone",rules:e.inputRules},model:{value:e.form.phone,callback:function(t){e.$set(e.form,"phone",t)},expression:"form.phone"}}),a("v-text-field",{attrs:{required:"",type:"email",outlined:"",placeholder:"Email","prepend-inner-icon":"email",rules:e.emailRules},model:{value:e.form.email,callback:function(t){e.$set(e.form,"email",t)},expression:"form.email"}}),a("v-textarea",{attrs:{required:"",type:"text",outlined:"",filled:"",placeholder:"not yazÄ±nÄ±z","prepend-inner-icon":"pen"},model:{value:e.form.note,callback:function(t){e.$set(e.form,"note",t)},expression:"form.note"}}),a("tags",{attrs:{list:e.teams,label:"TakÄ±mlar",multi:!0,table:"team"},model:{value:e.form.linked,callback:function(t){e.$set(e.form,"linked",t)},expression:"form.linked"}}),a("v-row",{staticClass:"justify-end align-center ma-2"},[a("v-btn",{staticClass:"success mx-0 mt-3 ",attrs:{disabled:!e.isFormValid,"elevation-6":"",loading:e.isLoading},on:{click:function(t){return e.saveMember()}}},[e._v(" "+e._s(e.editMode?"Kaydet":"Ekle")+" ")]),e.loadingText?a("span",{staticClass:"ml-2 mt-2 text-subtitle-1"},[e._v(" "+e._s(e.loadingText)+" ")]):e._e()],1)],1)],1)],1):e._e()],1),e.dialog?e._e():[a("v-toolbar",{attrs:{fixed:""}},[a("v-toolbar-title",{staticClass:"grey--text font-weight-bold"},[e._v(" Ãœyeler ")]),a("v-spacer"),a("v-btn",{staticClass:"mx-2",attrs:{icon:e.$vuetify.breakpoint.xs,color:"red",dark:""},on:{click:function(t){e.dialog=!e.dialog}}},[a("v-icon",{attrs:{left:e.$vuetify.breakpoint.smAndUp}},[e._v(" mdi-plus ")]),e._v(" "+e._s(e.$vuetify.breakpoint.smAndUp?"Ekle":"")+" ")],1)],1),a("v-text-field",{attrs:{type:"text",dense:"",filled:"",placeholder:"Arama","hide-details":"","prepend-inner-icon":"mdi-magnify","single-line":""},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}}),e.filteredList.length<1?a("v-layout",{staticClass:"pt-12",attrs:{row:"","justify-center":""}},[a("v-layout",{attrs:{column:"","align-center":""}},[a("span",{class:{"grey--text text-h4":e.$vuetify.breakpoint.smAndUp,"grey--text text-h5 ":e.$vuetify.breakpoint.xsOnly}},[e._v(" HiÃ§ Ãœye bulunamadÄ± ðŸ˜” ")])])],1):e._e(),a("v-list",{attrs:{dense:""}},e._l(e.filteredList,(function(t,i){return a("v-card",{key:i,staticClass:"my-4"},[a("v-list-item",{key:i,staticClass:"project",class:e.$vuetify.breakpoint.xs?"px-1":""},[a("v-list-item-content",[a("v-layout",{staticClass:"mt-1 ml-1",attrs:{row:"",wrap:""}},[a("v-flex",{staticClass:"mb-1",attrs:{xs12:"",sm5:""}},[a("v-icon",[e._v(" drag_indicator ")]),e._v(" "+e._s(t.name)+" ("+e._s(t.role)+") ")],1),a("v-flex",{staticClass:"my-1",attrs:{xs12:"",sm2:""}},[t.phone?a("a",{staticClass:"mr-3",attrs:{href:"https://api.whatsapp.com/send?phone="+t.phone}},[a("v-btn",{attrs:{icon:"",elevation:"4"}},[a("v-icon",{attrs:{color:"green accent-2"}},[e._v(" mdi-whatsapp ")])],1)],1):a("v-icon",{staticClass:"mr-6",attrs:{color:"gray "}},[e._v(" mdi-whatsapp ")]),t.phone?a("a",{attrs:{href:"tel:+"+t.phone}},[a("v-btn",{attrs:{icon:"",elevation:"4"}},[a("v-icon",{attrs:{color:"blue accent-2"}},[e._v("mdi-phone ")])],1)],1):a("v-icon",{attrs:{color:"gray accent-2"}},[e._v("mdi-phone ")])],1),a("v-flex",{staticClass:"my-1",attrs:{xs12:"",sm5:""}},[t.email?a("a",{staticStyle:{"text-decoration":"none"},attrs:{href:"mailto:"+t.email}},[a("v-icon",{attrs:{color:"cyan accent-2",left:""}},[e._v("mdi-email ")]),e._v(" "+e._s(t.email)+" ")],1):e._e()])],1),a("v-list-item-subtitle",[e._v(" "+e._s(t.note)+" ")]),t.linked?a("v-list-item-subtitle",{staticClass:"my-1",on:{click:function(a){return e.editPost(t)}}},[e._l(t.linked,(function(t,i){return[a("v-chip",{key:i,staticClass:"mt-4 mr-2",attrs:{small:""}},[e._v(" "+e._s(t.display)+" ")])]}))],2):a("v-list-item-subtitle",[a("v-chip",{staticClass:"mt-4 mr-2",attrs:{small:""}},[e._v(' "TakÄ±m Ãœyesi DeÄŸil." ')])],1)],1),a("v-list-item-action",{},[t._created?a("v-list-item-action-text",[e._v(" "+e._s(e._f("moment")(e.timestampConvert(t._created)," Do, MMMM YYYY"))+" ")]):e._e(),a("div",{staticClass:"d-flex flew-row"},[a("v-btn",{staticClass:"project ma-1",attrs:{icon:"",small:""},on:{click:function(a){return e.editPost(t)}}},[a("v-icon",[e._v("edit")])],1),a("v-btn",{staticClass:"project ma-1",attrs:{icon:"",small:""},on:{click:function(a){return e.deleteItem(t)}}},[a("v-icon",[e._v("delete")])],1)],1)],1)],1)],1)})),1)]],2)},n=[],s=a("1da1"),r=a("5530"),l=(a("96cf"),a("4de4"),a("caad"),a("2532"),a("b0c0"),a("ac1f"),a("841c"),a("d3b7"),a("3ca3"),a("ddb0"),a("d81d"),a("2f62")),o=a("7513"),c=a("aafd"),m={name:"Members",components:{tags:c["a"]},props:["type"],data:function(){return{search:"",editMode:!1,dialog:!1,isLoading:!1,isFormValid:!1,loadingText:"",form:{name:"",email:"",password:"123456",role:"Ãœye"},memberships:[],inputRules:[function(e){return!!e||"Bu alan gerekli"},function(e){return e&&e.length>=3||"En Az 3 Karakter Giriniz"}],emailRules:[function(e){return!!e||"Bu alan gerekli"},function(e){return!e||/^\w+([.-]?\w+)*@\w+([.-]?\w+)*(\.\w{2,3})+$/.test(e)||"E-mail geÃ§ersiz"}]}},computed:Object(r["a"])(Object(r["a"])({},Object(l["e"])({members:function(e){return e.collections.members},teams:function(e){return e.collections.teams}})),{},{filterByType:function(){var e=this;return this.type?this.members.filter((function(t){return t.role==e.type})):this.members},filteredList:function(){var e=this;return this.filterByType.filter((function(t){return t.name.toLowerCase().includes(e.search.toLowerCase())}))}}),methods:Object(r["a"])(Object(r["a"])(Object(r["a"])({},Object(l["b"])(["getAllItems","save","delete"])),o["a"]),{},{closeForm:function(){this.dialog=!1,this.editMode=!1,this.memberships=[],this.form={name:"",phone:"",email:"",teams:"",password:"123456",role:"Ãœye"}},editPost:function(e){this.form=e,this.editMode=!0,this.dialog=!0},saveItem:function(e){return this.save(e)},deleteItem:function(e){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function a(){var i,n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,t.$confirm("Bu Ãœyeyi Silmek Ä°stiyor musunuz ?",{title:"UyarÄ±",buttonTrueText:"Evet",buttonFalseText:"HayÄ±r",color:"red"});case 2:if(i=a.sent,!i){a.next=9;break}return t.isLoading=!0,a.next=7,t.delete({parent:"collections",child:"members",data:{filter:{_id:e._id}}});case 7:n=a.sent,n&&n.data.success&&(t.$store.commit("snackbar/success",e.name+" Silindi"),t.isLoading=!1,t.closeForm());case 9:case"end":return a.stop()}}),a)})))()},saveMember:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var a,i,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.isLoading=!0,e.loadingText="Ãœye kaydediliyor",a=e.form.linked,e.$delete(e.form,"linked"),t.next=6,e.saveItem({parent:"collections",child:"members",data:e.form});case 6:if(i=t.sent,!i){t.next=18;break}return e.$store.commit("snackbar/success",i.data.name+" Kaydedildi"),e.loadingText="TakÄ±m KayÄ±tlarÄ± Siliniyor",t.next=12,e.delete({parent:"collections",child:"teammember",data:{filter:{"member._id":i.data._id}}});case 12:if(t.sent,!(a&&a.length>=0)){t.next=18;break}return t.next=16,Promise.all(a.map(function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(a){var n,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n={_id:a._id,link:"teams",display:a.display},s={_id:i.data._id,link:"members",display:i.data.name},t.next=4,e.saveItem({parent:"collections",child:"teammember",data:{member:s,team:n}});case 4:t.sent;case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()));case 16:n=t.sent,n&&(e.getAllItems({parent:"collections",child:"members",data:""}),e.$store.commit("snackbar/success","TakÄ±m KayÄ±tlarÄ± yenilendi."));case 18:e.isLoading=!1,e.loadingText="",e.closeForm();case 21:case"end":return t.stop()}}),t)})))()}}),mounted:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.members&&!(e.members.length<=0)){t.next=3;break}return t.next=3,e.getAllItems({parent:"collections",child:"members",data:{sort:{name:1}}});case 3:if(e.teams&&!(e.teams.length<=0)){t.next=6;break}return t.next=6,e.getAllItems({parent:"collections",child:"teams",data:""});case 6:case"end":return t.stop()}}),t)})))()}},d=m,u=(a("df8e"),a("2877")),f=a("6544"),p=a.n(f),v=a("8336"),h=a("b0af"),b=a("99d9"),y=a("cc20"),x=a("a523"),_=a("0e8f"),k=a("4bd4"),g=a("132d"),V=a("a722"),w=a("8860"),C=a("da13"),T=a("1800"),L=a("5d23"),I=a("0fd9"),$=a("b974"),j=a("0789"),O=a("2fa4"),A=a("8654"),R=a("a844"),F=a("71d9"),M=a("2a7f"),E=Object(u["a"])(d,i,n,!1,null,"58a2c830",null);t["default"]=E.exports;p()(E,{VBtn:v["a"],VCard:h["a"],VCardText:b["d"],VCardTitle:b["e"],VChip:y["a"],VContainer:x["a"],VFlex:_["a"],VForm:k["a"],VIcon:g["a"],VLayout:V["a"],VList:w["a"],VListItem:C["a"],VListItemAction:T["a"],VListItemActionText:L["e"],VListItemContent:L["g"],VListItemSubtitle:L["j"],VRow:I["a"],VSelect:$["a"],VSlideYTransition:j["s"],VSpacer:O["a"],VTextField:A["a"],VTextarea:R["a"],VToolbar:F["a"],VToolbarTitle:M["c"]})},aafd:function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("v-autocomplete",e._g(e._b({attrs:{items:e.list,"item-value":"display","item-text":"name",outlined:"","return-object":"","hide-selected":""},scopedSlots:e._u([e.hideselection?{key:"selection",fn:function(){},proxy:!0}:null],null,!0),model:{value:e.selectedValue,callback:function(t){e.selectedValue=t},expression:"selectedValue"}},"v-autocomplete",e.attrs,!1),e.listeners)),e.hideselection&&e.value?a("v-list",{attrs:{dense:""}},[a("v-subheader",[e._v(" KayÄ±tlÄ± Ãœyeler "+e._s(e.value.length))]),a("v-list-item-group",{attrs:{color:"primary"}},e._l(e.value,(function(t,i){return a("v-list-item",{key:i,on:{click:function(t){return e.remove(i)}}},[a("v-list-item-icon",[a("v-icon",[e._v(" mdi-account ")])],1),a("v-list-item-content",[a("v-list-item-title",{domProps:{textContent:e._s(t.display)}})],1),a("v-list-item-action",[a("v-btn",{attrs:{icon:""}},[a("v-icon",{attrs:{color:"red"}},[e._v("mdi-trash-can-outline")])],1)],1)],1)})),1)],1):e._e()],1)},n=[],s=a("15fd"),r=(a("159b"),a("b0c0"),a("a434"),["input"]),l={name:"tags",props:["value","list","table","hideselection"],inheritAttrs:!1,data:function(){return{inputVal:this.value}},computed:{listeners:function(){var e=this.$listeners,t=(e.input,Object(s["a"])(e,r));return t},attrs:function(){return this.$attrs},selectedValue:{get:function(){return this.inputVal?this.inputVal:null},set:function(e){var t=this,a=[];e.length>0?e.forEach((function(e){a.push({_id:e._id,link:t.table,display:e.name||e.display})})):a={_id:e._id,link:this.table,display:e.name||e.display},this.$emit("input",a)}}},methods:{remove:function(e){e>=0&&this.value.splice(e,1)}}},o=l,c=a("2877"),m=a("6544"),d=a.n(m),u=a("c6a6"),f=a("8336"),p=a("132d"),v=a("8860"),h=a("da13"),b=a("1800"),y=a("5d23"),x=a("1baa"),_=a("34c3"),k=a("e0c7"),g=Object(c["a"])(o,i,n,!1,null,"1999c978",null);t["a"]=g.exports;d()(g,{VAutocomplete:u["a"],VBtn:f["a"],VIcon:p["a"],VList:v["a"],VListItem:h["a"],VListItemAction:b["a"],VListItemContent:y["g"],VListItemGroup:x["a"],VListItemIcon:_["a"],VListItemTitle:y["k"],VSubheader:k["a"]})},df8e:function(e,t,a){"use strict";a("475f")}}]);
//# sourceMappingURL=Members.e131b1c4.js.map