(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["Teams"],{"0eec":function(e,t,a){},"20b5":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",{staticClass:"mb-2"},[a("v-slide-y-transition",{attrs:{"hide-on-leave":""}},[e.dialog?a("v-card",[a("v-card-title",[a("h2",{staticClass:"subheading grey--text"},[e._v(" "+e._s(e.editMode?"DÃ¼zenle":"Yeni Ekle")+" ")]),a("v-spacer"),a("v-btn",{attrs:{color:"red",icon:""},on:{click:function(t){return e.closeForm()}}},[a("v-icon",[e._v("mdi-close")])],1)],1),a("v-card-text",[a("v-form",{ref:"form",staticClass:"px-3"},[a("v-text-field",{attrs:{type:"text",outlined:"",placeholder:"TakÄ±m AdÄ±","prepend-inner-icon":"edit"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}}),a("v-text-field",{attrs:{type:"hidden"},model:{value:e.form.membercount,callback:function(t){e.$set(e.form,"membercount",t)},expression:"form.membercount"}}),a("tags",{key:"admin",attrs:{list:e.members,label:"TakÄ±m Admin",multi:!1,table:"members"},model:{value:e.form.admin,callback:function(t){e.$set(e.form,"admin",t)},expression:"form.admin"}}),a("tags",{key:"member",attrs:{list:e.members,label:"Ãœye SeÃ§",table:"members",multi:!0},model:{value:e.form.linked,callback:function(t){e.$set(e.form,"linked",t)},expression:"form.linked"}}),e.form.linked?a("v-list",{attrs:{dense:""}},[a("v-subheader",[e._v(" KayÄ±tlÄ± Ãœyeler "+e._s(e.form.linked.length))]),a("v-list-item-group",{attrs:{color:"primary"}},e._l(e.form.linked,(function(t,i){return a("v-list-item",{key:i},[a("v-list-item-icon",[a("v-icon",[e._v(" mdi-account ")])],1),a("v-list-item-content",[a("v-list-item-title",{domProps:{textContent:e._s(t.display)}})],1)],1)})),1)],1):e._e(),a("v-row",{staticClass:"justify-end ma-2"},[a("v-btn",{staticClass:"success mx-0 mt-3 ",attrs:{"elevation-6":"",loading:e.isLoading},on:{click:function(t){return e.saveTeam()}}},[e._v(" "+e._s(e.editMode?"Kaydet":"Ekle")+" ")])],1)],1)],1)],1):e._e()],1),e.dialog?e._e():[a("v-toolbar",{attrs:{fixed:""}},[a("v-toolbar-title",{staticClass:"grey--text font-weight-bold"},[e._v(" TakÄ±mlar ")]),a("v-spacer"),a("v-btn",{staticClass:"mx-2",attrs:{icon:e.$vuetify.breakpoint.xs,color:"red",dark:""},on:{click:function(t){e.dialog=!e.dialog}}},[a("v-icon",{attrs:{left:e.$vuetify.breakpoint.smAndUp}},[e._v(" mdi-plus ")]),e._v(" "+e._s(e.$vuetify.breakpoint.smAndUp?"Ekle":"")+" ")],1)],1),a("v-text-field",{attrs:{type:"text",dense:"",filled:"",placeholder:"Arama","hide-details":"","prepend-inner-icon":"mdi-magnify","single-line":""},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}}),e.teams.length<1?a("v-layout",{staticClass:"pt-12",attrs:{row:"","justify-center":""}},[a("v-layout",{attrs:{column:"","align-center":""}},[a("span",{class:{"grey--text text-h4":e.$vuetify.breakpoint.smAndUp,"grey--text text-h5 ":e.$vuetify.breakpoint.xsOnly}},[e._v(" HiÃ§ Ãœye bulunamadÄ± ðŸ˜” ")])])],1):e._e(),e.teams?a("v-list",e._l(e.filteredList,(function(t,i){return a("v-card",{key:i,staticClass:"my-4"},[a("v-list-item",{key:i,staticClass:"project",class:e.$vuetify.breakpoint.xs?"px-1":""},[a("v-list-item-content",[a("v-layout",{staticClass:"mt-1 ml-1",attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs12:"",sm6:""}},[a("v-icon",[e._v(" drag_indicator ")]),e._v(" "+e._s(t.name)+" ")],1),a("v-flex",{attrs:{xs12:"",sm6:""}},[a("v-icon",{attrs:{small:"",left:""}},[e._v("mdi-phone")]),e._v(e._s(t.phone||" - Yok - ")+" ")],1)],1),t.linked?a("v-list-item-subtitle",[a("v-chip",{staticClass:"mt-4 mr-2",attrs:{small:""}},[e._v(" "+e._s(t.linked.length)+" Ãœye ")])],1):a("v-list-item-subtitle",[a("v-chip",{staticClass:"mt-4 mr-2",attrs:{small:""}},[e._v(' "Ãœyesi Yok." ')])],1)],1),a("v-list-item-action",{},[a("v-list-item-action-text",[e._v(" "+e._s(e._f("moment")(t._created," Do, MMMM YYYY"))+" ")]),a("div",{staticClass:"d-flex flew-row"},[a("v-btn",{staticClass:"project ma-1",attrs:{icon:"",small:""},on:{click:function(a){return e.editPost(t)}}},[a("v-icon",[e._v("edit")])],1),a("v-btn",{staticClass:"project ma-1",attrs:{icon:"",small:""},on:{click:function(a){return e.deleteItem(t)}}},[a("v-icon",[e._v("delete")])],1)],1)],1)],1)],1)})),1):e._e()]],2)},n=[],s=a("1da1"),r=a("5530"),l=(a("96cf"),a("b0c0"),a("d3b7"),a("3ca3"),a("ddb0"),a("d81d"),a("4de4"),a("caad"),a("2532"),a("ac1f"),a("841c"),a("2f62")),o=a("aafd"),c={name:"Teams",components:{tags:o["a"]},data:function(){return{ready:!1,search:"",editMode:!1,dialog:!1,isLoading:!1,form:{}}},methods:Object(r["a"])(Object(r["a"])({},Object(l["b"])(["getAllItems","save","delete"])),{},{closeForm:function(){this.dialog=!1,this.editMode=!1,this.form={}},editPost:function(e){this.form=e,this.editMode=!0,this.dialog=!0},saveItem:function(e){return this.save(e)},saveTeam:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var a,i,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.isLoading=!0,e.loadingText="TakÄ±m kaydediliyor",a=e.form.linked,e.$delete(e.form,"linked"),t.next=6,e.save({parent:"collections",child:"teams",data:e.form});case 6:if(i=t.sent,!i){t.next=19;break}return e.$store.dispatch("snackbar/setSnackbar",{color:"success",message:i.data.name+" Kaydedildi"}),e.loadingText="TakÄ±m KayÄ±tlarÄ± Siliniyor",t.next=12,e.delete({parent:"collections",child:"teammember",data:{filter:{"team._id":i.data._id}}});case 12:if(t.sent,e.loadingText="TakÄ±mlar kaydediliyor",!(a&&a.length>=0)){t.next=19;break}return t.next=17,Promise.all(a.map(function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(a){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return{_id:a._id,link:"members",display:a.display},n={_id:i.data._id,link:"teams",display:i.data.name},t.next=4,e.saveItem({parent:"collections",child:"teammember",data:{member:a,team:n}});case 4:t.sent;case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()));case 17:n=t.sent,n&&(e.getAllItems({parent:"collections",child:"teams",data:""}),e.$store.dispatch("snackbar/setSnackbar",{color:"success",message:"TakÄ±m KayÄ±tlarÄ± yenilendi."}),e.isLoading=!1,e.loadingText="");case 19:e.isLoading=!1,e.loadingText="",e.closeForm();case 22:case"end":return t.stop()}}),t)})))()},deleteItem:function(e){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function a(){var i,n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,t.$confirm("GerÃ§ekten Silmek Ä°stiyor musunuz ?",{title:"UyarÄ±",buttonTrueText:"Evet",buttonFalseText:"HayÄ±r",color:"red"});case 2:if(i=a.sent,!i){a.next=11;break}return t.isLoading=!0,console.log(e),a.next=8,t.delete({parent:"collections",child:"teams",data:e._id});case 8:n=a.sent,console.log("remove result",n),n&&n.data.success&&(console.log("remove success"),t.isLoading=!1,t.closeForm());case 11:case"end":return a.stop()}}),a)})))()}}),computed:Object(r["a"])(Object(r["a"])({},Object(l["e"])({members:function(e){return e.collections.members},teams:function(e){return e.collections.teams}})),{},{filteredList:function(){var e=this;return this.teams.filter((function(t){return t.name.toLowerCase().includes(e.search.toLowerCase())}))}}),mounted:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.members&&!(e.members.length<=0)){t.next=3;break}return t.next=3,e.getAllItems({parent:"collections",child:"members",data:""});case 3:if(e.teams&&!(e.teams.length<=0)){t.next=6;break}return t.next=6,e.getAllItems({parent:"collections",child:"teams",data:""});case 6:case"end":return t.stop()}}),t)})))()}},m=c,d=(a("7813"),a("2877")),u=a("6544"),f=a.n(u),v=a("8336"),p=a("b0af"),b=a("99d9"),h=a("cc20"),k=a("a523"),x=a("0e8f"),g=a("4bd4"),y=a("132d"),_=a("a722"),V=a("8860"),w=a("da13"),T=a("1800"),C=a("5d23"),L=a("1baa"),j=a("34c3"),I=a("0fd9"),$=a("0789"),A=a("2fa4"),O=a("e0c7"),M=a("8654"),R=a("71d9"),S=a("2a7f"),E=Object(d["a"])(m,i,n,!1,null,"52c37ae8",null);t["default"]=E.exports;f()(E,{VBtn:v["a"],VCard:p["a"],VCardText:b["d"],VCardTitle:b["e"],VChip:h["a"],VContainer:k["a"],VFlex:x["a"],VForm:g["a"],VIcon:y["a"],VLayout:_["a"],VList:V["a"],VListItem:w["a"],VListItemAction:T["a"],VListItemActionText:C["e"],VListItemContent:C["g"],VListItemGroup:L["a"],VListItemIcon:j["a"],VListItemSubtitle:C["j"],VListItemTitle:C["k"],VRow:I["a"],VSlideYTransition:$["s"],VSpacer:A["a"],VSubheader:O["a"],VTextField:M["a"],VToolbar:R["a"],VToolbarTitle:S["c"]})},7813:function(e,t,a){"use strict";a("0eec")},aafd:function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-autocomplete",{attrs:{items:e.list,"item-value":"display","item-text":"name",outlined:"",chips:"","small-chips":"","deletable-chips":"",label:e.label,multiple:e.multi,"return-object":"","hide-selected":"",rules:e.required?[function(e){return!!e||"En Az Bir kayÄ±t seÃ§iniz"}]:[]},model:{value:e.selectedValue,callback:function(t){e.selectedValue=t},expression:"selectedValue"}})},n=[],s=(a("159b"),a("b0c0"),a("a434"),{name:"tags",props:["value","list","label","multi","table","required"],data:function(){return{inputVal:this.value}},computed:{selectedValue:{get:function(){return this.inputVal?this.inputVal:null},set:function(e){var t=this,a=[];e.length>0?e.forEach((function(e){a.push({_id:e._id,link:t.table,display:e.name||e.display})})):a={_id:e._id,link:this.table,display:e.name||e.display},this.$emit("input",a)}}},methods:{remove:function(e){e>=0&&this.inputVal.splice(e,1)}}}),r=s,l=a("2877"),o=a("6544"),c=a.n(o),m=a("c6a6"),d=Object(l["a"])(r,i,n,!1,null,"5ebecf1e",null);t["a"]=d.exports;c()(d,{VAutocomplete:m["a"]})}}]);
//# sourceMappingURL=Teams.b16c4321.js.map