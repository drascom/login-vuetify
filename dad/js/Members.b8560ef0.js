(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["Members"],{"0b58":function(e,t,a){"use strict";a("ef05")},"69dc":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",{staticClass:"mb-2"},[a("v-slide-y-transition",{attrs:{"hide-on-leave":""}},[e.dialog?a("v-card",[a("v-card-title",[a("h2",{staticClass:"subheading grey--text"},[e._v(" "+e._s(e.editMode?"DÃ¼zenle":"Yeni Ekle")+" ")]),a("v-spacer"),a("v-btn",{attrs:{color:"red",icon:""},on:{click:function(t){return e.closeForm()}}},[a("v-icon",[e._v("mdi-close")])],1)],1),a("v-card-text",[a("v-form",{ref:"form",staticClass:"px-3",model:{value:e.isFormValid,callback:function(t){e.isFormValid=t},expression:"isFormValid"}},[a("v-select",{attrs:{items:["Admin","Moderator","Ãœye"],label:"Yetki Durumu",outlined:"",filled:""},model:{value:e.form.role,callback:function(t){e.$set(e.form,"role",t)},expression:"form.role"}}),a("v-text-field",{attrs:{type:"text",outlined:"",placeholder:"Ä°sim","prepend-inner-icon":"edit",rules:e.inputRules},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}}),a("v-text-field",{attrs:{maxlength:"10",counter:"10",hint:"0 olmadan 10 hane olarak girin",type:"number",outlined:"",placeholder:"Telefon","prepend-inner-icon":"phone",rules:e.inputRules},model:{value:e.form.phone,callback:function(t){e.$set(e.form,"phone",t)},expression:"form.phone"}}),a("v-text-field",{attrs:{required:"",type:"email",outlined:"",placeholder:"Email","prepend-inner-icon":"email",rules:e.emailRules},model:{value:e.form.email,callback:function(t){e.$set(e.form,"email",t)},expression:"form.email"}}),a("tags",{attrs:{list:e.teams,label:"TakÄ±mlar",multi:!0,table:"team"},model:{value:e.form.linked,callback:function(t){e.$set(e.form,"linked",t)},expression:"form.linked"}}),a("v-row",{staticClass:"justify-end align-center ma-2"},[a("v-btn",{staticClass:"success mx-0 mt-3 ",attrs:{disabled:!e.isFormValid,"elevation-6":"",loading:e.isLoading},on:{click:function(t){return e.saveMember()}}},[e._v(" "+e._s(e.editMode?"Kaydet":"Ekle")+" ")]),e.loadingText?a("span",{staticClass:"ml-2 mt-2 text-subtitle-1"},[e._v(" "+e._s(e.loadingText)+" ")]):e._e()],1)],1)],1)],1):e._e()],1),e.dialog?e._e():[a("v-toolbar",{attrs:{fixed:""}},[a("v-toolbar-title",{staticClass:"grey--text font-weight-bold"},[e._v(" Ãœyeler ")]),a("v-spacer"),a("v-btn",{staticClass:"mx-2",attrs:{icon:e.$vuetify.breakpoint.xs,color:"red",dark:""},on:{click:function(t){e.dialog=!e.dialog}}},[a("v-icon",{attrs:{left:e.$vuetify.breakpoint.smAndUp}},[e._v(" mdi-plus ")]),e._v(" "+e._s(e.$vuetify.breakpoint.smAndUp?"Ekle":"")+" ")],1)],1),a("v-text-field",{attrs:{type:"text",dense:"",filled:"",placeholder:"Arama","hide-details":"","prepend-inner-icon":"mdi-magnify","single-line":""},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}}),e.filteredList.length<1?a("v-layout",{staticClass:"pt-12",attrs:{row:"","justify-center":""}},[a("v-layout",{attrs:{column:"","align-center":""}},[a("span",{class:{"grey--text text-h4":e.$vuetify.breakpoint.smAndUp,"grey--text text-h5 ":e.$vuetify.breakpoint.xsOnly}},[e._v(" HiÃ§ Ãœye bulunamadÄ± ðŸ˜” ")])])],1):e._e(),a("v-list",e._l(e.filteredList,(function(t,i){return a("v-card",{key:i,staticClass:"my-4"},[a("v-list-item",{key:i,staticClass:"project",class:e.$vuetify.breakpoint.xs?"px-1":""},[a("v-list-item-content",[a("v-layout",{staticClass:"mt-1 ml-1",attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs12:"",sm6:""}},[a("v-icon",[e._v(" drag_indicator ")]),e._v(" "+e._s(t.name)+" ("+e._s(t.role)+") ")],1),a("v-flex",{attrs:{xs12:"",sm6:""}},[a("v-icon",{attrs:{small:"",left:""}},[e._v("mdi-phone")]),e._v(e._s(t.phone||" - Yok - ")+" ")],1)],1),t.linked?a("v-list-item-subtitle",{on:{click:function(a){return e.editPost(t)}}},[e._l(t.linked,(function(t,i){return[a("v-chip",{key:i,staticClass:"mt-4 mr-2",attrs:{small:""}},[e._v(" "+e._s(t.display)+" ")])]}))],2):a("v-list-item-subtitle",[a("v-chip",{staticClass:"mt-4 mr-2",attrs:{small:""}},[e._v(' "TakÄ±m Ãœyesi DeÄŸil." ')])],1)],1),a("v-list-item-action",{},[a("v-list-item-action-text",[e._v(" "+e._s(e._f("moment")(t._created," Do, MMMM YYYY"))+" ")]),a("div",{staticClass:"d-flex flew-row"},[a("v-btn",{staticClass:"project ma-1",attrs:{icon:"",small:""},on:{click:function(a){return e.editPost(t)}}},[a("v-icon",[e._v("edit")])],1),a("v-btn",{staticClass:"project ma-1",attrs:{icon:"",small:""},on:{click:function(a){return e.deleteItem(t)}}},[a("v-icon",[e._v("delete")])],1)],1)],1)],1)],1)})),1)]],2)},n=[],s=a("1da1"),r=a("5530"),l=(a("96cf"),a("b0c0"),a("d3b7"),a("3ca3"),a("ddb0"),a("d81d"),a("4de4"),a("caad"),a("2532"),a("ac1f"),a("841c"),a("2f62")),o=a("aafd"),c={name:"Members",components:{tags:o["a"]},data:function(){return{search:"",editMode:!1,dialog:!1,isLoading:!1,isFormValid:!1,loadingText:"",form:{name:"",email:"",password:"123456",role:"Ãœye"},memberships:[],inputRules:[function(e){return!!e||"Bu alan gerekli"},function(e){return e&&e.length>=3||"En Az 3 Karakter Giriniz"}],emailRules:[function(e){return!!e||"Bu alan gerekli"},function(e){return!e||/^\w+([.-]?\w+)*@\w+([.-]?\w+)*(\.\w{2,3})+$/.test(e)||"E-mail geÃ§ersiz"}]}},methods:Object(r["a"])(Object(r["a"])({},Object(l["b"])(["getAllItems","save","delete"])),{},{closeForm:function(){this.dialog=!1,this.editMode=!1,this.memberships=[],this.form={name:"",phone:"",email:"",teams:"",password:"123456",role:"Ãœye"}},editPost:function(e){this.form=e,this.editMode=!0,this.dialog=!0},saveItem:function(e){return this.save(e)},deleteItem:function(e){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function a(){var i,n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,t.$confirm("Bu Ãœyeyi Silmek Ä°stiyor musunuz ?",{title:"UyarÄ±",buttonTrueText:"Evet",buttonFalseText:"HayÄ±r",color:"red"});case 2:if(i=a.sent,!i){a.next=9;break}return t.isLoading=!0,a.next=7,t.delete({parent:"collections",child:"members",data:{filter:{_id:e._id}}});case 7:n=a.sent,n&&n.data.success&&(t.$store.dispatch("snackbar/setSnackbar",{color:"error",message:e.name+" Silindi"}),t.isLoading=!1,t.closeForm());case 9:case"end":return a.stop()}}),a)})))()},saveMember:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var a,i,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.isLoading=!0,e.loadingText="Ãœye kaydediliyor",a=e.form.linked,e.$delete(e.form,"linked"),t.next=6,e.saveItem({parent:"collections",child:"members",data:e.form});case 6:if(i=t.sent,!i){t.next=18;break}return e.$store.dispatch("snackbar/setSnackbar",{color:"success",message:i.data.name+" Kaydedildi"}),e.loadingText="TakÄ±m KayÄ±tlarÄ± Siliniyor",t.next=12,e.delete({parent:"collections",child:"teammember",data:{filter:{"member._id":i.data._id}}});case 12:if(t.sent,!(a&&a.length>=0)){t.next=18;break}return t.next=16,Promise.all(a.map(function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(a){var n,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return console.log("map item",a),n={_id:a._id,link:"teams",display:a.display},s={_id:i.data._id,link:"members",display:i.data.name},t.next=5,e.saveItem({parent:"collections",child:"teammember",data:{member:s,team:n}});case 5:t.sent;case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()));case 16:n=t.sent,n&&(e.getAllItems({parent:"collections",child:"members",data:""}),e.$store.dispatch("snackbar/setSnackbar",{color:"success",message:"TakÄ±m KayÄ±tlarÄ± yenilendi."}));case 18:e.isLoading=!1,e.loadingText="",e.closeForm();case 21:case"end":return t.stop()}}),t)})))()}}),computed:Object(r["a"])(Object(r["a"])({},Object(l["e"])({members:function(e){return e.collections.members},teams:function(e){return e.collections.teams}})),{},{filteredList:function(){var e=this;return this.members.filter((function(t){return t.name.toLowerCase().includes(e.search.toLowerCase())}))}}),mounted:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.members&&!(e.members.length<=0)){t.next=3;break}return t.next=3,e.getAllItems({parent:"collections",child:"members",data:""});case 3:if(e.teams&&!(e.teams.length<=0)){t.next=6;break}return t.next=6,e.getAllItems({parent:"collections",child:"teams",data:""});case 6:case"end":return t.stop()}}),t)})))()}},m=c,d=(a("0b58"),a("2877")),u=a("6544"),f=a.n(u),p=a("8336"),v=a("b0af"),b=a("99d9"),h=a("cc20"),x=a("a523"),k=a("0e8f"),g=a("4bd4"),y=a("132d"),_=a("a722"),V=a("8860"),w=a("da13"),C=a("1800"),T=a("5d23"),$=a("0fd9"),j=a("b974"),L=a("0789"),I=a("2fa4"),A=a("8654"),M=a("71d9"),R=a("2a7f"),F=Object(d["a"])(m,i,n,!1,null,"6c46f5cf",null);t["default"]=F.exports;f()(F,{VBtn:p["a"],VCard:v["a"],VCardText:b["d"],VCardTitle:b["e"],VChip:h["a"],VContainer:x["a"],VFlex:k["a"],VForm:g["a"],VIcon:y["a"],VLayout:_["a"],VList:V["a"],VListItem:w["a"],VListItemAction:C["a"],VListItemActionText:T["e"],VListItemContent:T["g"],VListItemSubtitle:T["j"],VRow:$["a"],VSelect:j["a"],VSlideYTransition:L["s"],VSpacer:I["a"],VTextField:A["a"],VToolbar:M["a"],VToolbarTitle:R["c"]})},aafd:function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-autocomplete",{attrs:{items:e.list,"item-value":"display","item-text":"name",outlined:"",chips:"","small-chips":"","deletable-chips":"",label:e.label,multiple:e.multi,"return-object":"","hide-selected":"",rules:e.required?[function(e){return!!e||"En Az Bir kayÄ±t seÃ§iniz"}]:[]},model:{value:e.selectedValue,callback:function(t){e.selectedValue=t},expression:"selectedValue"}})},n=[],s=(a("159b"),a("b0c0"),a("a434"),{name:"tags",props:["value","list","label","multi","table","required"],data:function(){return{inputVal:this.value}},computed:{selectedValue:{get:function(){return this.inputVal?this.inputVal:null},set:function(e){var t=this,a=[];e.length>0?e.forEach((function(e){a.push({_id:e._id,link:t.table,display:e.name||e.display})})):a={_id:e._id,link:this.table,display:e.name||e.display},this.$emit("input",a)}}},methods:{remove:function(e){e>=0&&this.inputVal.splice(e,1)}}}),r=s,l=a("2877"),o=a("6544"),c=a.n(o),m=a("c6a6"),d=Object(l["a"])(r,i,n,!1,null,"5ebecf1e",null);t["a"]=d.exports;c()(d,{VAutocomplete:m["a"]})},ef05:function(e,t,a){}}]);
//# sourceMappingURL=Members.b8560ef0.js.map