(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["Teams"],{"20b5":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",{staticClass:"mb-2"},[a("v-slide-y-transition",{attrs:{"hide-on-leave":""}},[e.cityEditDialog?a("v-card",[a("v-card-title",[a("h2",{staticClass:"subheading grey--text"},[e._v(" "+e._s(e.editMode?"DÃ¼zenle":"Yeni Ekle")+" ")]),a("v-spacer"),a("v-btn",{attrs:{color:"red",icon:""},on:{click:function(t){return e.closeForm()}}},[a("v-icon",[e._v("mdi-close")])],1)],1),a("v-card-text",[a("v-form",{ref:"form",staticClass:"px-3"},[a("tags",{key:"city",attrs:{list:e.cities,label:"Åžehir SeÃ§",table:"cities",disabled:e.disabled,"menu-props":{closeOnContentClick:!0}},model:{value:e.city,callback:function(t){e.city=t},expression:"city"}}),a("v-text-field",{directives:[{name:"uppercase",rawName:"v-uppercase"}],attrs:{type:"text",outlined:"",placeholder:"TakÄ±m  AdÄ±","prepend-inner-icon":"edit",rules:[function(e){return!!e||"TakÄ±m AdÄ± boÅŸ olamaz."}]},model:{value:e.newTeamForm.name,callback:function(t){e.$set(e.newTeamForm,"name",t)},expression:"newTeamForm.name"}}),a("tags",{key:"admin",attrs:{list:e.members,label:"TakÄ±m Admin",multi:!1,table:"members",chips:"","small-chips":"",rules:[function(e){return!!e||"En Az Bir kayÄ±t seÃ§iniz"}],"menu-props":{closeOnContentClick:!0}},model:{value:e.newTeamForm.admin,callback:function(t){e.$set(e.newTeamForm,"admin",t)},expression:"newTeamForm.admin"}}),a("tags",{key:"member",attrs:{list:e.members,label:"Ãœye SeÃ§",table:"members",chips:"","small-chips":"","deletable-chips":"",multiple:"","menu-props":{closeOnContentClick:!0}},model:{value:e.newTeamForm.linked,callback:function(t){e.$set(e.newTeamForm,"linked",t)},expression:"newTeamForm.linked"}}),a("v-row",{staticClass:"justify-end ma-2"},[a("v-btn",{staticClass:"success mx-0 mt-3 ",attrs:{"elevation-6":"",loading:e.isLoading},on:{click:function(t){return e.saveCity()}}},[e._v(" "+e._s(e.editMode?"Kaydet":"Ekle")+" ")])],1)],1)],1)],1):e._e()],1),e.selectedTeam?a("v-dialog",{model:{value:e.teamEditDialog,callback:function(t){e.teamEditDialog=t},expression:"teamEditDialog"}},[a("v-card",{staticClass:"pb-12 pt-6 mx-auto",class:{"px-12":!e.$vuetify.breakpoint.xs}},[a("v-card-title",[a("v-spacer"),a("v-btn",{attrs:{color:"red",icon:""},on:{click:function(t){return e.closeForm()}}},[a("v-icon",[e._v("mdi-close")])],1)],1),a("v-card-text",[a("v-text-field",{directives:[{name:"uppercase",rawName:"v-uppercase"}],attrs:{outlined:"",type:"text",placeholder:"TakÄ±m  AdÄ±",rules:[function(e){return!!e||"TakÄ±m AdÄ± boÅŸ olamaz."}]},model:{value:e.selectedTeam.name,callback:function(t){e.$set(e.selectedTeam,"name",t)},expression:"selectedTeam.name"}}),a("v-divider",{staticClass:"mb-6"}),a("tags",{key:"admin",attrs:{list:e.members,label:"TakÄ±m Admin",multi:!1,table:"members",chips:"","small-chips":"",rules:[function(e){return!!e||"En Az Bir kayÄ±t seÃ§iniz"}],"menu-props":{closeOnContentClick:!0}},model:{value:e.selectedTeam.admin,callback:function(t){e.$set(e.selectedTeam,"admin",t)},expression:"selectedTeam.admin"}}),a("tags",{key:"member",attrs:{list:e.members,label:"Ãœye Ekle",table:"members",chips:"","small-chips":"","deletable-chips":"",multiple:"","menu-props":{closeOnContentClick:!0},hideselection:!0},model:{value:e.selectedTeam.linked,callback:function(t){e.$set(e.selectedTeam,"linked",t)},expression:"selectedTeam.linked"}})],1),a("v-card-actions",[a("v-row",{staticClass:"justify-end ma-2"},[a("v-btn",{staticClass:"success mx-0 mt-3 ",attrs:{"elevation-6":"",loading:e.isLoading},on:{click:function(t){return e.saveTeam(e.selectedTeam)}}},[e._v(" Kaydet ")])],1)],1)],1)],1):e._e(),e.cityEditDialog?e._e():[a("v-toolbar",{attrs:{fixed:""}},[a("v-toolbar-title",{staticClass:"grey--text font-weight-bold"},[e._v(" TakÄ±mlar ")]),a("v-spacer"),a("v-btn",{staticClass:"mx-2",attrs:{icon:e.$vuetify.breakpoint.xs,color:"red",dark:""},on:{click:function(t){return e.newTeam()}}},[a("v-icon",{attrs:{left:e.$vuetify.breakpoint.smAndUp}},[e._v(" mdi-plus ")]),e._v(" "+e._s(e.$vuetify.breakpoint.smAndUp?"Ekle":"")+" ")],1)],1),a("v-text-field",{attrs:{type:"text",dense:"",filled:"",placeholder:"Arama","hide-details":"","prepend-inner-icon":"mdi-magnify","single-line":""},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}}),e.cities.length<1?a("v-layout",{staticClass:"pt-12",attrs:{row:"","justify-center":""}},[a("v-layout",{attrs:{column:"","align-center":""}},[a("span",{class:{"grey--text text-h4":e.$vuetify.breakpoint.smAndUp,"grey--text text-h5 ":e.$vuetify.breakpoint.xsOnly}},[e._v(" HiÃ§ TakÄ±m bulunamadÄ± ðŸ˜” ")])])],1):e._e(),e.cities?a("v-list",e._l(e.filteredList,(function(t,i){return a("v-card",{key:i,staticClass:"my-4"},[t.teams&&t.teams.length?a("v-list-item",{key:i,staticClass:"project",class:e.$vuetify.breakpoint.xs?"px-1":""},[a("v-list-item-content",[a("v-layout",{staticClass:"mt-1 ml-1",attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs12:"",sm6:""}},[a("v-icon",[e._v(" drag_indicator ")]),e._v(" "+e._s(t.name)+" ")],1)],1),t.teams&&t.teams.length?a("v-list-item-subtitle",[e._l(t.teams,(function(t){return[a("v-chip",{key:t._id,staticClass:"mt-4 mr-2",attrs:{small:""},on:{click:function(a){return e.editTeam(t)}}},[e._v(" "+e._s(e.getTeamName(t._id))+" ")])]}))],2):a("v-list-item-subtitle",[a("v-chip",{staticClass:"mt-4 mr-2",attrs:{small:""}},[e._v(' "TakÄ±m Yok." ')])],1)],1),a("v-list-item-action",{},[a("v-list-item-action-text",[a("v-btn",{attrs:{"x-small":"",dark:"",color:"red accent-3"},on:{click:function(a){return e.newTeamWithCity(t)}}},[e._v("TakÄ±m Ekle")])],1),a("div",{staticClass:"d-flex flew-row"})],1)],1):e._e()],1)})),1):e._e()]],2)},n=[],s=a("1da1"),r=a("5530"),l=(a("96cf"),a("4de4"),a("caad"),a("2532"),a("b0c0"),a("ac1f"),a("841c"),a("d3b7"),a("3ca3"),a("ddb0"),a("d81d"),a("2f62")),c=a("aafd"),o={search:"",inlineEdit:!1,disabled:!1,editMode:!1,newTeamForm:{},teamEditDialog:!1,cityEditDialog:!1,isLoading:!1,linked:[],city:{},team:{}},m={name:"Teams",components:{tags:c["a"]},data:function(){return Object(r["a"])({},o)},computed:Object(r["a"])(Object(r["a"])({},Object(l["e"])({members:function(e){return e.collections.members},teams:function(e){return e.collections.teams},cities:function(e){return e.collections.cities}})),{},{filteredList:function(){var e=this;return this.cities.filter((function(t){return t.name.toLowerCase().includes(e.search.toLowerCase())}))},selectedCity:{get:function(){var e=this;return this.cities.filter((function(t){return t._id.includes(e.city._id)}))[0]},set:function(e){this.city=e}},selectedTeam:{get:function(){var e=this;return this.teams.filter((function(t){return t._id.includes(e.team._id)}))[0]},set:function(e){this.team=e}}}),methods:Object(r["a"])(Object(r["a"])({},Object(l["b"])(["getAllItems","save","delete"])),{},{getTeamName:function(e){var t=this.teams.filter((function(t){return t._id.includes(e)}));if(t&&t.length>0)return t[0].name},closeForm:function(){Object.assign(this.$data,o)},editTeam:function(e){this.team={_id:e._id,name:e.name},this.teamEditDialog=!0},editCity:function(e){this.city={_id:e._id,name:e.name},this.editMode=!0,this.cityEditDialog=!0},newTeam:function(){this.cityEditDialog=!0},newTeamWithCity:function(e){this.city={_id:e._id,name:e.name},this.cityEditDialog=!0,this.disabled=!0},saveCity:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.isLoading=!0,t.next=3,e.saveTeam(e.newTeamForm);case 3:if(a=t.sent,!a){t.next=10;break}return e.selectedCity.teams?e.selectedCity.teams.push({_id:a.data._id,link:"teams",display:a.data.name}):e.selectedCity.teams=[{_id:a.data._id,link:"teams",display:a.data.name}],t.next=8,e.save({parent:"collections",child:"cities",data:e.selectedCity});case 8:t.sent,e.isLoading=!1;case 10:case"end":return t.stop()}}),t)})))()},saveTeam:function(e){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function a(){var i;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return t.linked=e.linked,t.linked&&t.$delete(e,"linked"),a.next=4,t.save({parent:"collections",child:"teams",data:e});case 4:return i=a.sent,t.saveLinkedMembers(i),a.abrupt("return",i);case 7:case"end":return a.stop()}}),a)})))()},saveLinkedMembers:function(e){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return console.log(e),a.next=3,t.delete({parent:"collections",child:"teammember",data:{filter:{"team._id":e.data._id}}});case 3:if(a.sent,!(t.linked&&t.linked.length>=0)){a.next=8;break}return a.next=7,Promise.all(t.linked.map(function(){var a=Object(s["a"])(regeneratorRuntime.mark((function a(i){var n,s;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return n={_id:i._id,link:"members",display:i.display},s={_id:e.data._id,link:"teams",display:e.data.name},a.next=4,t.save({parent:"collections",child:"teammember",data:{member:n,team:s}});case 4:a.sent;case 5:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()));case 7:a.sent;case 8:t.getAllItems({parent:"collections",child:"teams",data:{sort:{name:1}}}),t.getAllItems({parent:"collections",child:"teams",data:{sort:{name:1}}}),t.isLoading=!1,t.closeForm();case 12:case"end":return a.stop()}}),a)})))()},deleteItem:function(e){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function a(){var i,n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,t.$confirm("GerÃ§ekten Silmek Ä°stiyor musunuz ?",{title:"UyarÄ±",buttonTrueText:"Evet",buttonFalseText:"HayÄ±r",color:"red"});case 2:if(i=a.sent,!i){a.next=11;break}return t.isLoading=!0,console.log(e),a.next=8,t.delete({parent:"collections",child:"teams",data:e._id});case 8:n=a.sent,console.log("remove result",n),n&&n.data.success&&(console.log("remove success"),t.isLoading=!1,t.closeForm());case 11:case"end":return a.stop()}}),a)})))()}}),beforeMount:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.cities&&!(e.cities.length<=0)){t.next=3;break}return t.next=3,e.getAllItems({parent:"collections",child:"cities",data:{sort:{name:1}}});case 3:if(e.teams&&!(e.teams.length<=0)){t.next=6;break}return t.next=6,e.getAllItems({parent:"collections",child:"teams",data:{sort:{name:1}}});case 6:if(e.members&&!(e.members.length<=0)){t.next=9;break}return t.next=9,e.getAllItems({parent:"collections",child:"members",data:""});case 9:case"end":return t.stop()}}),t)})))()}},d=m,u=(a("72b4"),a("2877")),v=a("6544"),p=a.n(v),f=a("8336"),b=a("b0af"),h=a("99d9"),k=a("cc20"),y=a("a523"),g=a("169a"),x=a("ce7e"),_=a("0e8f"),T=a("4bd4"),w=a("132d"),C=a("a722"),V=a("8860"),L=a("da13"),A=a("1800"),j=a("5d23"),E=a("0fd9"),O=a("0789"),I=a("2fa4"),$=a("8654"),F=a("71d9"),D=a("2a7f"),R=Object(u["a"])(d,i,n,!1,null,"6bcf0486",null);t["default"]=R.exports;p()(R,{VBtn:f["a"],VCard:b["a"],VCardActions:h["b"],VCardText:h["d"],VCardTitle:h["e"],VChip:k["a"],VContainer:y["a"],VDialog:g["a"],VDivider:x["a"],VFlex:_["a"],VForm:T["a"],VIcon:w["a"],VLayout:C["a"],VList:V["a"],VListItem:L["a"],VListItemAction:A["a"],VListItemActionText:j["e"],VListItemContent:j["g"],VListItemSubtitle:j["j"],VRow:E["a"],VSlideYTransition:O["s"],VSpacer:I["a"],VTextField:$["a"],VToolbar:F["a"],VToolbarTitle:D["c"]})},"72b4":function(e,t,a){"use strict";a("9201")},9201:function(e,t,a){},aafd:function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("v-autocomplete",e._g(e._b({attrs:{items:e.list,"item-value":"display","item-text":"name",outlined:"","return-object":"","hide-selected":""},scopedSlots:e._u([e.hideselection?{key:"selection",fn:function(){},proxy:!0}:null],null,!0),model:{value:e.selectedValue,callback:function(t){e.selectedValue=t},expression:"selectedValue"}},"v-autocomplete",e.attrs,!1),e.listeners)),e.hideselection&&e.value?a("v-list",{attrs:{dense:""}},[a("v-subheader",[e._v(" KayÄ±tlÄ± Ãœyeler "+e._s(e.value.length))]),a("v-list-item-group",{attrs:{color:"primary"}},e._l(e.value,(function(t,i){return a("v-list-item",{key:i,on:{click:function(t){return e.remove(i)}}},[a("v-list-item-icon",[a("v-icon",[e._v(" mdi-account ")])],1),a("v-list-item-content",[a("v-list-item-title",{domProps:{textContent:e._s(t.display)}})],1),a("v-list-item-action",[a("v-btn",{attrs:{icon:""}},[a("v-icon",{attrs:{color:"red"}},[e._v("mdi-trash-can-outline")])],1)],1)],1)})),1)],1):e._e()],1)},n=[],s=a("15fd"),r=(a("159b"),a("b0c0"),a("a434"),["input"]),l={name:"tags",props:["value","list","table","hideselection"],inheritAttrs:!1,data:function(){return{inputVal:this.value}},computed:{listeners:function(){var e=this.$listeners,t=(e.input,Object(s["a"])(e,r));return t},attrs:function(){return this.$attrs},selectedValue:{get:function(){return this.inputVal?this.inputVal:null},set:function(e){var t=this,a=[];e.length>0?e.forEach((function(e){a.push({_id:e._id,link:t.table,display:e.name||e.display})})):a={_id:e._id,link:this.table,display:e.name||e.display},this.$emit("input",a)}}},methods:{remove:function(e){e>=0&&this.value.splice(e,1)}}},c=l,o=a("2877"),m=a("6544"),d=a.n(m),u=a("c6a6"),v=a("8336"),p=a("132d"),f=a("8860"),b=a("da13"),h=a("1800"),k=a("5d23"),y=a("1baa"),g=a("34c3"),x=a("e0c7"),_=Object(o["a"])(c,i,n,!1,null,"1999c978",null);t["a"]=_.exports;d()(_,{VAutocomplete:u["a"],VBtn:v["a"],VIcon:p["a"],VList:f["a"],VListItem:b["a"],VListItemAction:h["a"],VListItemContent:k["g"],VListItemGroup:y["a"],VListItemIcon:g["a"],VListItemTitle:k["k"],VSubheader:x["a"]})}}]);
//# sourceMappingURL=Teams.14303a6f.js.map